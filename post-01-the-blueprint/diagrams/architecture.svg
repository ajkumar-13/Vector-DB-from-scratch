<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 550">
  <defs>
    <linearGradient id="transportGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#74c0fc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#339af0;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="engineGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ffd43b;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#fab005;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="storageGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#69db7c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#40c057;stop-opacity:1" />
    </linearGradient>
    <filter id="dropShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="4" flood-opacity="0.15"/>
    </filter>
    <marker id="arrowGray" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <path d="M0,0 L0,6 L9,3 z" fill="#868e96"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="800" height="550" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="400" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#212529">VectorDB Architecture</text>
  <text x="400" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#868e96">Three-Layer Design: Transport â†’ Engine â†’ Storage</text>
  
  <!-- Client Box -->
  <rect x="320" y="75" width="160" height="45" rx="10" fill="white" stroke="#495057" stroke-width="2" filter="url(#dropShadow)"/>
  <text x="400" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#495057">ğŸŒ Client</text>
  <text x="400" y="112" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#868e96">HTTP Request (curl/SDK)</text>
  
  <!-- Arrow to Transport -->
  <line x1="400" y1="120" x2="400" y2="145" stroke="#868e96" stroke-width="2" marker-end="url(#arrowGray)"/>
  
  <!-- LAYER 1: Transport Layer -->
  <rect x="100" y="150" width="600" height="95" rx="12" fill="white" stroke="#339af0" stroke-width="3" filter="url(#dropShadow)"/>
  <rect x="100" y="150" width="600" height="30" rx="12" fill="url(#transportGrad)"/>
  <rect x="100" y="168" width="600" height="12" fill="url(#transportGrad)"/>
  <text x="130" y="170" font-family="Arial, sans-serif" font-size="14" fill="white" font-weight="bold">LAYER 1: TRANSPORT (The Doorman)</text>
  
  <!-- Transport Components -->
  <rect x="130" y="195" width="130" height="40" rx="6" fill="#e7f5ff" stroke="#74c0fc" stroke-width="1"/>
  <text x="195" y="212" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1971c2" font-weight="bold">Axum</text>
  <text x="195" y="226" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#495057">Web Framework</text>
  
  <text x="285" y="218" font-family="Arial, sans-serif" font-size="16" fill="#868e96">â†’</text>
  
  <rect x="310" y="195" width="130" height="40" rx="6" fill="#e7f5ff" stroke="#74c0fc" stroke-width="1"/>
  <text x="375" y="212" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1971c2" font-weight="bold">JSON Parser</text>
  <text x="375" y="226" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#495057">serde_json</text>
  
  <text x="465" y="218" font-family="Arial, sans-serif" font-size="16" fill="#868e96">â†’</text>
  
  <rect x="490" y="195" width="130" height="40" rx="6" fill="#e7f5ff" stroke="#74c0fc" stroke-width="1"/>
  <text x="555" y="212" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#1971c2" font-weight="bold">Validation</text>
  <text x="555" y="226" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#495057">Auth + Schema</text>
  
  <!-- Arrow to Engine -->
  <line x1="400" y1="245" x2="400" y2="270" stroke="#868e96" stroke-width="2" marker-end="url(#arrowGray)"/>
  
  <!-- LAYER 2: Core Engine -->
  <rect x="100" y="275" width="600" height="110" rx="12" fill="white" stroke="#fab005" stroke-width="3" filter="url(#dropShadow)"/>
  <rect x="100" y="275" width="600" height="30" rx="12" fill="url(#engineGrad)"/>
  <rect x="100" y="293" width="600" height="12" fill="url(#engineGrad)"/>
  <text x="130" y="295" font-family="Arial, sans-serif" font-size="14" fill="#212529" font-weight="bold">LAYER 2: CORE ENGINE (The Brain)</text>
  
  <!-- Engine Components -->
  <rect x="130" y="320" width="160" height="55" rx="6" fill="#fff9db" stroke="#fcc419" stroke-width="1"/>
  <text x="210" y="342" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#e67700" font-weight="bold">Query Planner</text>
  <text x="210" y="358" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#495057">Optimizer</text>
  <text x="210" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#868e96">Vector-first vs Filter-first</text>
  
  <rect x="320" y="320" width="160" height="55" rx="6" fill="#fff9db" stroke="#fcc419" stroke-width="1"/>
  <text x="400" y="342" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#e67700" font-weight="bold">Vector Index</text>
  <text x="400" y="358" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#495057">HNSW Graph</text>
  <text x="400" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#868e96">Approximate NN Search</text>
  
  <rect x="510" y="320" width="160" height="55" rx="6" fill="#fff9db" stroke="#fcc419" stroke-width="1"/>
  <text x="590" y="342" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#e67700" font-weight="bold">Metadata Index</text>
  <text x="590" y="358" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#495057">Tantivy</text>
  <text x="590" y="370" text-anchor="middle" font-family="Arial, sans-serif" font-size="8" fill="#868e96">Filter by attributes</text>
  
  <!-- Arrow to Storage -->
  <line x1="400" y1="385" x2="400" y2="410" stroke="#868e96" stroke-width="2" marker-end="url(#arrowGray)"/>
  
  <!-- LAYER 3: Storage Layer -->
  <rect x="100" y="415" width="600" height="95" rx="12" fill="white" stroke="#40c057" stroke-width="3" filter="url(#dropShadow)"/>
  <rect x="100" y="415" width="600" height="30" rx="12" fill="url(#storageGrad)"/>
  <rect x="100" y="433" width="600" height="12" fill="url(#storageGrad)"/>
  <text x="130" y="435" font-family="Arial, sans-serif" font-size="14" fill="white" font-weight="bold">LAYER 3: STORAGE (The Vault)</text>
  
  <!-- Storage Components -->
  <rect x="200" y="460" width="170" height="40" rx="6" fill="#ebfbee" stroke="#69db7c" stroke-width="1"/>
  <text x="285" y="478" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2b8a3e" font-weight="bold">Write-Ahead Log</text>
  <text x="285" y="492" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#495057">Append-Only (Durability)</text>
  
  <text x="395" y="483" font-family="Arial, sans-serif" font-size="16" fill="#868e96">â†’</text>
  
  <rect x="430" y="460" width="170" height="40" rx="6" fill="#ebfbee" stroke="#69db7c" stroke-width="1"/>
  <text x="515" y="478" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#2b8a3e" font-weight="bold">Segments</text>
  <text x="515" y="492" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#495057">Memory-Mapped Files</text>
  
  <!-- Arrow to Disk -->
  <line x1="400" y1="510" x2="400" y2="535" stroke="#868e96" stroke-width="2" marker-end="url(#arrowGray)"/>
  
  <!-- Disk -->
  <text x="400" y="548" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#495057">ğŸ’¾ Persistent Disk Storage</text>
</svg>
